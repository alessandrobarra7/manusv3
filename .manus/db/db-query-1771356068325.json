{
  "query": "CREATE TABLE `audit_log` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`user_id` int,\n\t`unit_id` int,\n\t`action` enum('LOGIN','LOGOUT','VIEW_STUDY','OPEN_VIEWER','CREATE_REPORT','UPDATE_REPORT','SIGN_REPORT','CREATE_USER','UPDATE_USER','DELETE_USER','CREATE_UNIT','UPDATE_UNIT','DELETE_UNIT') NOT NULL,\n\t`target_type` varchar(50),\n\t`target_id` varchar(100),\n\t`ip_address` varchar(45),\n\t`user_agent` text,\n\t`metadata` json,\n\t`timestamp` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `audit_log_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `reports` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`unit_id` int NOT NULL,\n\t`study_id` int,\n\t`study_instance_uid` varchar(128),\n\t`template_id` int,\n\t`author_user_id` int NOT NULL,\n\t`body` text NOT NULL,\n\t`status` enum('draft','signed','revised') NOT NULL DEFAULT 'draft',\n\t`version` int NOT NULL DEFAULT 1,\n\t`previousVersionId` int,\n\t`signedAt` timestamp,\n\t`signedBy` int,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `reports_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `studies_cache` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`unit_id` int NOT NULL,\n\t`orthanc_study_id` varchar(64),\n\t`study_instance_uid` varchar(128),\n\t`patient_name` varchar(255),\n\t`patient_id` varchar(64),\n\t`accession_number` varchar(64),\n\t`study_date` date,\n\t`modality` varchar(50),\n\t`description` text,\n\t`studyMetadata` json,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `studies_cache_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `templates` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`unit_id` int,\n\t`name` varchar(255) NOT NULL,\n\t`modality` varchar(50),\n\t`bodyTemplate` text NOT NULL,\n\t`fields` json,\n\t`isGlobal` boolean NOT NULL DEFAULT false,\n\t`isActive` boolean NOT NULL DEFAULT true,\n\t`createdBy` int,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `templates_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `units` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`name` varchar(255) NOT NULL,\n\t`slug` varchar(100) NOT NULL,\n\t`isActive` boolean NOT NULL DEFAULT true,\n\t`orthanc_base_url` varchar(500),\n\t`orthanc_basic_user` varchar(100),\n\t`orthanc_basic_pass` varchar(255),\n\t`logoUrl` varchar(500),\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `units_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `units_slug_unique` UNIQUE(`slug`)\n);\n\nALTER TABLE `users` MODIFY COLUMN `role` enum('admin_master','admin_unit','radiologist','referring_doctor') NOT NULL DEFAULT 'referring_doctor';\n\nALTER TABLE `users` ADD `unit_id` int;\n\nALTER TABLE `users` ADD `isActive` boolean DEFAULT true NOT NULL;",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 3Me9dVE4fH3ZyTq.ed3df32c863d --database cTdrattvNQ95XCgX9zeyNM --execute CREATE TABLE `audit_log` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`user_id` int,\n\t`unit_id` int,\n\t`action` enum('LOGIN','LOGOUT','VIEW_STUDY','OPEN_VIEWER','CREATE_REPORT','UPDATE_REPORT','SIGN_REPORT','CREATE_USER','UPDATE_USER','DELETE_USER','CREATE_UNIT','UPDATE_UNIT','DELETE_UNIT') NOT NULL,\n\t`target_type` varchar(50),\n\t`target_id` varchar(100),\n\t`ip_address` varchar(45),\n\t`user_agent` text,\n\t`metadata` json,\n\t`timestamp` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `audit_log_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `reports` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`unit_id` int NOT NULL,\n\t`study_id` int,\n\t`study_instance_uid` varchar(128),\n\t`template_id` int,\n\t`author_user_id` int NOT NULL,\n\t`body` text NOT NULL,\n\t`status` enum('draft','signed','revised') NOT NULL DEFAULT 'draft',\n\t`version` int NOT NULL DEFAULT 1,\n\t`previousVersionId` int,\n\t`signedAt` timestamp,\n\t`signedBy` int,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `reports_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `studies_cache` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`unit_id` int NOT NULL,\n\t`orthanc_study_id` varchar(64),\n\t`study_instance_uid` varchar(128),\n\t`patient_name` varchar(255),\n\t`patient_id` varchar(64),\n\t`accession_number` varchar(64),\n\t`study_date` date,\n\t`modality` varchar(50),\n\t`description` text,\n\t`studyMetadata` json,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `studies_cache_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `templates` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`unit_id` int,\n\t`name` varchar(255) NOT NULL,\n\t`modality` varchar(50),\n\t`bodyTemplate` text NOT NULL,\n\t`fields` json,\n\t`isGlobal` boolean NOT NULL DEFAULT false,\n\t`isActive` boolean NOT NULL DEFAULT true,\n\t`createdBy` int,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `templates_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `units` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`name` varchar(255) NOT NULL,\n\t`slug` varchar(100) NOT NULL,\n\t`isActive` boolean NOT NULL DEFAULT true,\n\t`orthanc_base_url` varchar(500),\n\t`orthanc_basic_user` varchar(100),\n\t`orthanc_basic_pass` varchar(255),\n\t`logoUrl` varchar(500),\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `units_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `units_slug_unique` UNIQUE(`slug`)\n);\n\nALTER TABLE `users` MODIFY COLUMN `role` enum('admin_master','admin_unit','radiologist','referring_doctor') NOT NULL DEFAULT 'referring_doctor';\n\nALTER TABLE `users` ADD `unit_id` int;\n\nALTER TABLE `users` ADD `isActive` boolean DEFAULT true NOT NULL;",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 2949
}